{"version":3,"sources":["core.tsx","ErrorWrapper.tsx","TableView.tsx","table-utils.tsx","XlsxView.tsx","converters.tsx","types.tsx","samples.tsx","Editor.tsx","components/SourceBox.tsx","consts.tsx","components/TransformBox.tsx","components/DestBox.tsx","components/Toolbar.tsx","App.tsx","index.tsx","ErrorDisplay.tsx"],"names":["doTransform","sourceType","source","transform","destType","input","sourceConverters","error","type","phase","data","trim","length","_","lodash","R","ramda","eval","destinationConverters","defaultRenderError","errorInfo","reset","toString","href","onClick","ErrorWrapper","state","resetError","setState","undefined","this","props","renderError","render","React","Component","LoadableTable","Loadable","loader","loading","CellRenderer","value","JSON","stringify","TableView","memo","dataArray","Array","from","columnOrder","columnSet","Set","forEach","datum","Object","keys","column","has","push","add","getColumns","columns","map","col","accessor","Header","Cell","ErrorDisplay","result","Error","extension","a","pXLSX","XLSX","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","Date","toISOString","ExportButton","label","format","Button","event","generateAndDownloadXlsx","alert","XlsxView","style","textAlign","csv","dsvFormat","scsv","tsv","parse","json","text","toml","yaml","safeLoad","stringTransform","fn","safeDump","table","element","xlsx","prettyNames","prettyDescriptions","MainLayout","sourceSamples","A","B","C","layoutNames","ThreeColumns","BottomCode","Editor","options","onChange","useState","lineWrapping","setLineWrapping","plainEditor","setPlainEditor","e","target","placeholder","className","onBeforeChange","editor","Popup","trigger","Icon","circular","name","position","right","bottom","hoverable","plain","Checkbox","checked","SourceBox","onChangeSource","mode","theme","lineNumbers","TRANSFORM_PLACEHOLDER","TransformBox","onChangeTransform","DestBox","comp","readOnly","ConverterSelect","preventDefault","Dropdown","item","closeOnChange","Menu","minWidth","Item","key","active","description","Toolbar","setSourceType","loadSample","setDestType","layout","setLayout","fluid","secondary","size","entries","id","useLayoutState","createPersistedState","useTransformState","App","mainContent","setSource","setTransform","useMemo","split","defaultSize","ReactDOM","document","getElementById","stack"],"mappings":"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","file":"static/js/main.4eb51516.chunk.js","sourcesContent":["import { destinationConverters, sourceConverters } from \"./converters\";\nimport lodash from \"lodash\";\nimport * as ramda from \"ramda\";\nimport { TransformResult } from \"./types\";\n\nexport function doTransform(sourceType: string, source: string, transform: string, destType: string): TransformResult {\n  let input;\n  try {\n    input = sourceConverters[sourceType](source);\n  } catch (error) {\n    return { error, type: \"error\", phase: \"input\" };\n  }\n\n  let data = input;\n  if (transform.trim().length) {\n    try {\n      const _ = lodash; // eslint-disable-line\n      const R = ramda; // eslint-disable-line\n      eval(transform); // eslint-disable-line\n    } catch (error) {\n      return { error, type: \"error\", phase: \"transform\" };\n    }\n  }\n\n  try {\n    return destinationConverters[destType](data);\n  } catch (error) {\n    return { error, type: \"error\", phase: \"output\" };\n  }\n}\n","import React from \"react\";\n\ntype ErrorRenderer = (error: Error, errorInfo: React.ErrorInfo | undefined, reset: () => void) => React.ReactChild;\n\nconst defaultRenderError: ErrorRenderer = (error, errorInfo, reset) => (\n  <div>\n    Oops! An error occurred: ${error.toString()}\n    <br />\n    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n    <a href=\"#\" onClick={reset}>\n      Try again\n    </a>\n  </div>\n);\n\ninterface ErrorWrapperProps {\n  render: () => React.ReactChild;\n  renderError?: ErrorRenderer;\n}\n\ninterface ErrorWrapperState {\n  error?: Error;\n  errorInfo?: React.ErrorInfo;\n}\n\nexport default class ErrorWrapper extends React.Component<ErrorWrapperProps, ErrorWrapperState> {\n  public state: ErrorWrapperState = {};\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    if (this.state.error) {\n      return (this.props.renderError || defaultRenderError)(this.state.error, this.state.errorInfo, this.resetError);\n    }\n    return this.props.render();\n  }\n\n  private resetError = () => {\n    this.setState({ error: undefined, errorInfo: undefined });\n  };\n}\n","import { DestinationConverter } from \"./types\";\nimport ErrorWrapper from \"./ErrorWrapper\";\nimport React from \"react\";\nimport { ErrorDisplay } from \"./ErrorDisplay\";\nimport { getColumns } from \"./table-utils\";\nimport Loadable from \"react-loadable\";\nimport { CellInfo } from \"react-table\";\n\nconst LoadableTable = Loadable({\n  loader: () => import(\"react-table\"),\n  loading: () => <div>Loading table</div>,\n});\n\nconst CellRenderer = ({ value }: CellInfo) => {\n  if (typeof value === \"object\") {\n    try {\n      value = JSON.stringify(value);\n    } catch (error) {\n      value = \"<unrenderable>\";\n    }\n  }\n  return <>{value}</>;\n};\n\nconst TableView = React.memo(({ data }: { data: any }) => {\n  try {\n    const dataArray = Array.from(data);\n    const columnOrder = getColumns(dataArray);\n    if (!columnOrder.length) {\n      return (\n        <ErrorDisplay\n          result={{\n            phase: \"output\",\n            error: new Error(\"Unable to figure out columns\"),\n            type: \"error\",\n          }}\n        />\n      );\n    }\n    return (\n      <LoadableTable\n        data={dataArray}\n        columns={columnOrder.map(col => ({ accessor: col, Header: col, Cell: CellRenderer }))}\n      />\n    );\n  } catch (error) {\n    return <ErrorDisplay result={{ phase: \"output\", error, type: \"error\" }} />;\n  }\n});\n\nexport const tableConverter: DestinationConverter = data => ({\n  error: null,\n  type: \"element\",\n  element: <ErrorWrapper render={() => <TableView data={data} />} />,\n});\n","export function getColumns(dataArray: any[]) {\n  const columnOrder: string[] = [];\n  const columnSet = new Set<string>();\n  dataArray.forEach(\n    datum =>\n      datum &&\n      Object.keys(datum as object).forEach(column => {\n        if (!columnSet.has(column)) {\n          columnOrder.push(column);\n          columnSet.add(column);\n        }\n      }),\n  );\n  return columnOrder;\n}\n","import { DestinationConverter } from \"./types\";\nimport React from \"react\";\nimport { Button } from \"semantic-ui-react\";\n\nasync function generateAndDownloadXlsx(data: any, extension: string) {\n  const pXLSX = import(\"xlsx\");\n  const dataArray = Array.from(data);\n  const XLSX = await pXLSX;\n  const ws = XLSX.utils.json_to_sheet(dataArray);\n  const wb = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(wb, ws, \"d2d\");\n  XLSX.writeFile(wb, `d2d-${new Date().toISOString()}.${extension}`);\n}\n\nconst ExportButton = ({ label, format, data }: { label: string; format: string; data: any }) => (\n  <Button\n    onClick={event => {\n      try {\n        generateAndDownloadXlsx(data, format);\n      } catch (error) {\n        alert(error);\n      }\n    }}\n  >\n    {label}\n  </Button>\n);\n\nconst XlsxView = ({ data }: { data: any }) => {\n  return (\n    <div style={{ textAlign: \"center\" }}>\n      <ExportButton label=\"Download XLSX\" format=\"xlsx\" data={data} />\n      <ExportButton label=\"Download XLS\" format=\"xls\" data={data} />\n      <ExportButton label=\"Download ODS\" format=\"ods\" data={data} />\n    </div>\n  );\n};\n\nexport const xlsxConverter: DestinationConverter = data => ({\n  error: null,\n  type: \"element\",\n  element: <XlsxView data={data} />,\n});\n","import { dsvFormat } from \"d3-dsv\";\nimport toml from \"toml\";\nimport yaml from \"js-yaml\";\nimport { DestinationConverter, SourceConverter, StringTransformResult } from \"./types\";\nimport { tableConverter } from \"./TableView\";\nimport { xlsxConverter } from \"./XlsxView\";\n\nconst csv = dsvFormat(\",\");\nconst scsv = dsvFormat(\";\");\nconst tsv = dsvFormat(\"\\t\");\n\nexport const sourceConverters: { [key: string]: SourceConverter } = {\n  csv: csv.parse,\n  json: JSON.parse,\n  scsv: scsv.parse,\n  text: data => data,\n  toml: toml.parse,\n  tsv: tsv.parse,\n  yaml: yaml.safeLoad,\n};\n\nconst stringTransform = (fn: (data: any) => string) => (data: any) =>\n  ({ value: fn(data), type: \"string\" } as StringTransformResult);\n\nexport const destinationConverters: { [key: string]: DestinationConverter } = {\n  \"json-compact\": stringTransform(JSON.stringify),\n  csv: stringTransform(csv.format),\n  scsv: stringTransform(scsv.format),\n  json: stringTransform(data => JSON.stringify(data, null, 2)),\n  text: stringTransform(data => \"\" + data),\n  tsv: stringTransform(tsv.format),\n  yaml: stringTransform(yaml.safeDump),\n  table: tableConverter,\n  xlsx: xlsxConverter,\n};\n\nexport const prettyNames: { [key: string]: string } = {\n  \"json-compact\": \"JSON (compact)\",\n  csv: \"CSV\",\n  json: \"JSON\",\n  scsv: \"SCSV\",\n  table: \"Table\",\n  text: \"Text\",\n  toml: \"TOML\",\n  tsv: \"TSV\",\n  xlsx: \"XLS/XLSX\",\n  yaml: \"YAML\",\n};\n\nexport const prettyDescriptions: { [key: string]: string } = {\n  csv: \"Comma-separated values\",\n  scsv: \"Semicolon-separated values\",\n  tsv: \"Tab-separated values\",\n};\n","import React from \"react\";\n\nexport interface BaseTransformResult {}\n\nexport interface ElementTransformResult extends BaseTransformResult {\n  type: \"element\";\n  element: React.ReactChild;\n}\n\nexport interface StringTransformResult extends BaseTransformResult {\n  type: \"string\";\n  value: string;\n}\n\nexport interface ErrorTransformResult extends BaseTransformResult {\n  type: \"error\";\n  error: Error;\n  phase: \"input\" | \"transform\" | \"output\";\n}\n\nexport type TransformResult = ElementTransformResult | StringTransformResult | ErrorTransformResult;\nexport type SourceConverter = (data: any) => any;\nexport type DestinationConverter<T = TransformResult> = (data: any) => T;\n\nexport interface Styleable {\n  style?: React.CSSProperties;\n}\n\nexport enum MainLayout {\n  ThreeColumns = \"threeColumns\",\n  BottomCode = \"bottomCode\",\n}\n\nexport const layoutNames: { [layout in MainLayout]: string } = {\n  [MainLayout.ThreeColumns]: \"Three Columns\",\n  [MainLayout.BottomCode]: \"Code on Bottom\",\n};\n","const yaml = `\n- A: One\n  B: Two\n  C: Three\n- A: Two\n  B: Four\n  C: Five\n- A: Three\n  B: Six\n  C: Seven\n`.trim();\n\nconst toml = `# This is a TOML document.\ntitle = \"TOML Example\"\n[owner]\nname = \"Tom Preston-Werner\"\ndob = 1979-05-27T07:32:00-08:00 # First class dates`;\n\nconst tsv = `A\\tB\\tC\nOne\\tTwo\\tThree\nTwo\\tFour\\tFive\nThree\\tSix\\tSeven`;\n\nconst jsonData = [\n  {\n    A: \"One\",\n    B: \"Two\",\n    C: \"Three\",\n  },\n  {\n    A: \"Two\",\n    B: \"Four\",\n    C: \"Five\",\n  },\n  {\n    A: \"Three\",\n    B: \"Six\",\n    C: \"Seven\",\n  },\n];\n\nconst json = JSON.stringify(jsonData, null, 2);\n\nconst scsv = `\"A\",\"B\",\"C\"\n\"One\",\"Two\",\"Three\"\n\"Two\",\"Four\",\"Five\"\n\"Three\",\"Six\",\"Seven\"`;\n\nconst csv = `A,B,C\nOne,Two,Three\nTwo,Four,Five\nThree,Six,Seven`;\n\nexport const sourceSamples: any = {\n  \"json-compact\": \"json-compact\",\n  csv,\n  scsv,\n  json,\n  text: \"Some arbitrary text\",\n  tsv,\n  yaml,\n  toml,\n};\n","import { EditorConfiguration } from \"codemirror\";\nimport { Controlled as ControlledCodeMirror } from \"react-codemirror2\";\nimport React from \"react\";\nimport { Checkbox, Icon, Popup } from \"semantic-ui-react\";\n\ninterface EditorProps {\n  value: string;\n  options: Partial<EditorConfiguration>;\n  onChange: (newValue: string) => void;\n}\n\nconst Editor: React.FC<EditorProps> = ({ value, options, onChange }) => {\n  const [lineWrapping, setLineWrapping] = React.useState(false);\n  const [plainEditor, setPlainEditor] = React.useState(false);\n  return (\n    <>\n      {plainEditor ? (\n        <textarea value={value} onChange={e => onChange(e.target.value)} placeholder={options.placeholder} />\n      ) : (\n        <ControlledCodeMirror\n          className=\"code-editor\"\n          value={value}\n          options={{ ...options, lineWrapping }}\n          onBeforeChange={(editor, data, value) => onChange(value)}\n        />\n      )}\n      <Popup\n        trigger={\n          <Icon\n            circular\n            name=\"setting\"\n            style={{\n              position: \"absolute\",\n              right: \"5px\",\n              bottom: \"5px\",\n            }}\n          />\n        }\n        hoverable\n        plain\n      >\n        <Checkbox\n          label=\"Wrap Lines\"\n          checked={lineWrapping}\n          onChange={(event, data) => setLineWrapping(!!data.checked)}\n        />\n        <br />\n        <Checkbox\n          label=\"Plain Editor\"\n          checked={plainEditor}\n          onChange={(event, data) => setPlainEditor(!!data.checked)}\n        />\n      </Popup>\n    </>\n  );\n};\n\nexport default Editor;\n","import React from \"react\";\nimport Editor from \"../Editor\";\nimport { dataTheme } from \"../consts\";\nimport { Styleable } from \"../types\";\nimport { prettyNames } from \"../converters\";\n\ninterface SourceProps extends Styleable {\n  source: string;\n  sourceType: string;\n  onChangeSource: (str: string) => void;\n}\n\nexport const SourceBox: React.FC<SourceProps> = ({ sourceType, source, onChangeSource, style }) => (\n  <div className=\"codebox-wrapper\" style={style}>\n    <Editor\n      value={source}\n      options={{\n        mode: sourceType,\n        theme: dataTheme,\n        lineNumbers: true,\n        placeholder: `Paste or type in ${prettyNames[sourceType] || sourceType} data here.`,\n      }}\n      onChange={onChangeSource}\n    />\n  </div>\n);\n","export const dataTheme = \"solarized light\";\nexport const codeTheme = \"solarized dark\";\n","import React from \"react\";\nimport Editor from \"../Editor\";\nimport { codeTheme } from \"../consts\";\nimport { Styleable } from \"../types\";\n\ninterface TransformProps extends Styleable {\n  transform: string;\n  onChangeTransform: (s: string) => void;\n}\n\nconst TRANSFORM_PLACEHOLDER = `\n// Feel free to modify \\`data\\` using JavaScript here.\n// * Lodash is available as \\`_\\`\n// ** e.g. \\`_.reverse(data)\\`\n// * Ramda is available as \\`R\\`\n// ** e.g. \\`data = R.reverse(data)\\`\n`.trim();\nexport const TransformBox: React.FC<TransformProps> = ({ transform, onChangeTransform, style }) => (\n  <div className=\"codebox-wrapper\" style={style}>\n    <Editor\n      value={transform}\n      options={{\n        mode: \"javascript\",\n        theme: codeTheme,\n        lineNumbers: true,\n        placeholder: TRANSFORM_PLACEHOLDER,\n      }}\n      onChange={onChangeTransform}\n    />\n  </div>\n);\n","import React from \"react\";\nimport Editor from \"../Editor\";\nimport { dataTheme } from \"../consts\";\nimport { ErrorDisplay } from \"../ErrorDisplay\";\nimport { Styleable, TransformResult } from \"../types\";\nimport { prettyNames } from \"../converters\";\n\ninterface DestProps extends Styleable {\n  destType: string;\n  result: TransformResult;\n}\n\nexport const DestBox: React.FC<DestProps> = ({ destType, result, style }) => {\n  let comp: React.ReactChild | null = null;\n  switch (result.type) {\n    case \"element\":\n      comp = result.element;\n      break;\n    case \"string\":\n      comp = (\n        <Editor\n          value={result.value}\n          options={{\n            mode: destType,\n            theme: dataTheme,\n            lineNumbers: true,\n            readOnly: true,\n            placeholder: `Output will appear here in ${prettyNames[destType] || destType}.`,\n          }}\n          onChange={() => void 8}\n        />\n      );\n      break;\n    case \"error\":\n      comp = <ErrorDisplay result={result} />;\n      break;\n  }\n  return (\n    <div className=\"codebox-wrapper\" style={style}>\n      {comp}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Dropdown, DropdownItemProps, Menu } from \"semantic-ui-react\";\nimport { destinationConverters, prettyDescriptions, prettyNames, sourceConverters } from \"../converters\";\nimport { layoutNames, MainLayout, Styleable } from \"../types\";\n\ninterface ConverterSelectProps extends Styleable {\n  label: string;\n  value: string;\n  options: string[];\n  onChange: (val: string) => void;\n}\n\nconst ConverterSelect: React.FC<ConverterSelectProps> = ({ label, value, options, onChange, style }) => {\n  const onClick = (event: any, props: DropdownItemProps) => {\n    onChange(props.name);\n    event.preventDefault();\n  };\n  return (\n    <Dropdown\n      item\n      text={`${label}: ${prettyNames[value] || value}`}\n      /* TODO: these have no effect :-/ */\n      closeOnChange={false}\n    >\n      <Dropdown.Menu style={{ minWidth: \"25em\" }}>\n        {options.map(item => (\n          <Dropdown.Item\n            key={item}\n            name={item}\n            active={value === item}\n            onClick={onClick}\n            text={prettyNames[item] || item}\n            description={prettyDescriptions[item]}\n          />\n        ))}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\ntype Setter<T> = (t: T) => void;\n\ninterface ToolbarProps {\n  sourceType: string;\n  setSourceType: Setter<string>;\n  loadSample: () => void;\n  destType: string;\n  setDestType: Setter<string>;\n  layout: MainLayout;\n  setLayout: (layout: MainLayout) => void;\n}\n\nexport const Toolbar: React.FC<ToolbarProps> = props => {\n  const { sourceType, setSourceType, loadSample, destType, setDestType, layout, setLayout } = props;\n  return (\n    <Menu fluid secondary size=\"small\">\n      <ConverterSelect\n        label=\"Source Format\"\n        value={sourceType}\n        options={Object.keys(sourceConverters)}\n        onChange={setSourceType}\n      />\n      <ConverterSelect\n        label=\"Output Format\"\n        value={destType}\n        options={Object.keys(destinationConverters)}\n        onChange={setDestType}\n      />\n      <Menu.Menu position=\"right\">\n        <Menu.Item name=\"loadSample\" onClick={loadSample}>\n          Load {prettyNames[sourceType] || sourceType} Sample\n        </Menu.Item>\n        <Dropdown item text=\"Layout...\">\n          <Dropdown.Menu>\n            {Object.entries(layoutNames).map(([id, name]) => (\n              <Dropdown.Item\n                key={id}\n                name={id}\n                active={layout === id}\n                text={name}\n                onClick={(event, { name }) => setLayout(name as MainLayout)}\n              />\n            ))}\n          </Dropdown.Menu>\n        </Dropdown>\n      </Menu.Menu>\n    </Menu>\n  );\n};\n","import React from \"react\";\nimport { sourceSamples } from \"./samples\";\nimport { doTransform } from \"./core\";\nimport { MainLayout, TransformResult } from \"./types\";\nimport SplitPane from \"react-split-pane\";\nimport { SourceBox } from \"./components/SourceBox\";\nimport { TransformBox } from \"./components/TransformBox\";\nimport { DestBox } from \"./components/DestBox\";\nimport { Toolbar } from \"./components/Toolbar\";\nimport createPersistedState from \"use-persisted-state\";\n\nconst useLayoutState = createPersistedState('d2d-layout');\nconst useTransformState = createPersistedState('d2d-transform');\n\nconst App: React.FC = () => {\n  const [sourceType, setSourceType] = React.useState(\"yaml\");\n  const [source, setSource] = React.useState(\"\");\n  const loadSample = () => {\n    setSource(sourceSamples[sourceType]);\n  };\n  const [destType, setDestType] = React.useState(\"json\");\n  const [transform, setTransform] = useTransformState(\"\");\n  const [layout, setLayout] = useLayoutState(MainLayout.ThreeColumns);\n  const result: TransformResult = React.useMemo(() => doTransform(sourceType, source, transform, destType), [\n    sourceType,\n    source,\n    transform,\n    destType,\n  ]);\n  let mainContent: React.ReactNode;\n  switch (layout) {\n    case MainLayout.ThreeColumns:\n    default:\n      mainContent = (\n        <SplitPane split=\"vertical\" defaultSize=\"35%\">\n          <SourceBox source={source} sourceType={sourceType} onChangeSource={setSource} />\n          <SplitPane split=\"vertical\" defaultSize=\"40%\">\n            <TransformBox transform={transform} onChangeTransform={setTransform} />\n            <DestBox destType={destType} result={result} />\n          </SplitPane>\n        </SplitPane>\n      );\n      break;\n    case MainLayout.BottomCode:\n      mainContent = (\n        <SplitPane split=\"horizontal\" defaultSize=\"80%\">\n          <SplitPane split=\"vertical\" defaultSize=\"50%\">\n            <SourceBox source={source} sourceType={sourceType} onChangeSource={setSource} />\n            <DestBox destType={destType} result={result} />\n          </SplitPane>\n          <TransformBox transform={transform} onChangeTransform={setTransform} />\n        </SplitPane>\n      );\n      break;\n  }\n  return (\n    <>\n      <div id=\"settings\">\n        <Toolbar\n          sourceType={sourceType}\n          setSourceType={setSourceType}\n          loadSample={loadSample}\n          destType={destType}\n          setDestType={setDestType}\n          layout={layout}\n          setLayout={setLayout}\n        />\n      </div>\n      <div id=\"main-panes\">{mainContent}</div>\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"react-table/react-table.css\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/solarized.css\";\nimport \"codemirror/mode/yaml/yaml\";\nimport \"codemirror/mode/toml/toml\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"codemirror/addon/display/placeholder\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import React from \"react\";\nimport { ErrorTransformResult } from \"./types\";\n\nexport const ErrorDisplay = ({ result: { error, phase } }: { result: ErrorTransformResult }) => (\n  <div className=\"error-result\">\n    <h2>\n      {error.name || \"Error\"} in {phase}\n    </h2>\n    {error.stack ? <div className=\"error-stack\">{error.stack}</div> : <b>{error.toString()}</b>}\n  </div>\n);\n"],"sourceRoot":""}